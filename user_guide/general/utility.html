<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>BitAuth User Guide : Utility Functions</title>

<style type='text/css' media='all'>@import url('../userguide.css');</style>
<link rel='stylesheet' type='text/css' media='all' href='../userguide.css' />

<script type="text/javascript" src="../nav/nav.js"></script>
<script type="text/javascript" src="../nav/prototype.lite.js"></script>
<script type="text/javascript" src="../nav/moo.fx.js"></script>
<script type="text/javascript" src="../nav/user_guide_menu.js"></script>

<meta http-equiv='expires' content='-1' />
<meta http-equiv= 'pragma' content='no-cache' />
<meta name='robots' content='all' />
<meta name='author' content='Dan Montgomery' />
<meta name='description' content='BitAuth User Guide' />

</head>
<body>


<!-- START NAVIGATION -->
<div id="nav"><div id="nav_inner"><script type="text/javascript">create_menu('../');</script></div></div>
<div id="nav2"><a name="top"></a><a href="javascript:void(0);" onclick="myHeight.toggle();"><img src="../images/nav_toggle_darker.jpg" width="154" height="43" border="0" title="Toggle Table of Contents" alt="Toggle Table of Contents" /></a></div>
<div id="masthead">
<table cellpadding="0" cellspacing="0" border="0" style="width:100%">
<tr>
<td><h1>BitAuth User Guide Version 1.0</h1></td>
<td id="breadcrumb_right"><a href="../toc.html">Table of Contents</a></td>
</tr>
</table>
</div>
<!-- END NAVIGATION -->


<!-- START BREADCRUMB -->

<table cellpadding="0" cellspacing="0" border="0" style="width:100%">
<tr>
<td id="breadcrumb">
<a href="http://dmontgomery.net/code/codeigniter-bitauth/">BitAuth</a> &nbsp;&#8250;&nbsp;
<a href="../index.html">User Guide Home</a> &nbsp;&#8250;&nbsp;
Utility Functions
</td>

</tr>
</table>
<!-- END BREADCRUMB -->

<br clear="all" />

<!-- START CONTENT -->
<div id="content">
<h1>Utility Functions</h1>
<h2>$this->bitauth->activate(<dfn>$activation_code</dfn>)</h2>
<p>This will activate a user based on the <var>activation_code</var> generated by <a href="../users/adding.html">add_user()</a> if <dfn>$require_activation</dfn> is <var>TRUE</var>.</p>

<h2>$this->bitauth->set_password(<dfn>$user_id</dfn>, <dfn>$new_password</dfn>)</h2>
<p>This will hash the <strong>plain text</strong> password passed to <dfn>$new_password</dfn>, and update the user along with the value for <var>password_last_set</var>.</p>

<h2>$this->bitauth->get_role(<dfn>$slug</dfn>)</h2>
<p>This will return the bit offset for a role based on the slug that is passed. This is a utility function used internally in BitAuth.</p>

<h2>$this->bitauth->get_roles()</h2>
<p>This returns an array of all roles defined in the <a href="./config.html">configuration</a>. The array is exactly as it's defined, in the format:</p>
<pre>array( 'slug' => 'description' );</pre>

<h2>$this->bitauth->set_login_field(<dfn>$field</dfn>)</h2>
<p>Declares a field that must be matched on login. There is no processing done before or after this check, an exact match is required. So, for example, if you want a
	case-insensitive match, you should run strtolower() on the data before it's stored in the database, and also on the form data before it's checked.</p>
<p>More on this method can be found in <a href="../users/logging_in.html">Logging In/Logging Out</a>.</p>

<h2>$this->bitauth->check_login_fields(<dfn>$user</dfn>, <dfn>$data</dfn>)</h2>
<p>This is a utility function called by login() which checks any fields

<h2>$this->bitauth->set_error(<dfn>$str</dfn>, <dfn>$update_session</dfn> = <var>TRUE</var>)</h2>
<p>Stores an error message in BitAuth. Currently, BitAuth only stores one message at a time. By default, this message will be saved to the session,
	you can disable this by passing <var>FALSE</var> as the second parameter.</p>

<h2>$this->bitauth->get_error(<dfn>$incl_delim</dfn> = <var>TRUE</var>)</h2>
<p>Retrieves the message stored by <dfn>$this->bitauth->set_error()</dfn>. The message is wrapped with <dfn>$_error_delim_prefix</dfn> and <dfn>$_error_delim_suffix</dfn>, unless passed <var>FALSE</var> as a parameter.</p>

<h2>$this->bitauth->set_error_delimiters(<dfn>$prefix</dfn>, <dfn>$suffix</dfn>)</h2>
<p>Set the prefix and suffix error delimiters.</p>

<h2>$this->bitauth->locked_out()</h2>
<p>Returns <var>TRUE</var> if the current IP is locked out</p>

<h2>$this->bitauth->log_attempt(<dfn>$user_id</dfn>, <dfn>$success</dfn> = <var>FALSE</var>)</h2>
<p>Logs a login attempt.</p>

<h2>$this->bitauth->hash_password(<dfn>$str</dfn>)</h2>
<p>This function will hash the string it is given. This is a utility function used internally by BitAuth.</p>

<h2>$this->bitauth->generate_code()</h2>
<p>Generates a random sha1 hash used for things like activation, forgot password, etc. Length of the string returned is 40 characters.</p>

<h2>$this->bitauth->complexity_requirements(<dfn>$separator</dfn> = <var>'&lt;br/&gt;'</var>)</h2>
<p>This function returns a string explaining the complexity requirements you have defined in your <a href="./config.html">configuration</a>.
	Called by the <a href="./validation.html">bitauth_valid_password</a> form_validation rule.

</div>
<!-- END CONTENT -->


<div id="footer">
<p><a href="#top">Top of Page</a></p>
</div>


</body>
</html>